<script>
    // change number of photos displayed on one page
    async function newPagination(num, isInit) {
        if (num == curPagination && isInit == false) {
            return;
        }
        document.getElementById(`${curPagination}-page`).classList.remove("selected");
        curPagination = num;
        document.getElementById(`${num}-page`).classList.add("selected");
        return $.ajax({
            type: "GET",
            url: '/ajax/newPaginationNumber',
            async: false,
            data: {
                'num': num
            },
            dataType: 'json',
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status);
                alert(thrownError);
            },
            // test
            success: function (info) {
                numOfPages = info.numOfPages;
                if (isInit == false) {
                    getLandmarks('skip', 'skip', -1, 1).then(result => {
                    }).catch(error => {
                        console.info(error);
                    });
                    changePage(1);
                }
            }

        });
    };
    // update page selections menu upon page change
    function changePage(pageNum) {
        document.getElementById("page-selections").innerHTML = ""
        if (pageNum > 2) {
            document.getElementById("page-selections").innerHTML += `<li class="page-item" onclick = "newPage(1)"><a class="page-link" href="#">1</a></li>`;
        }
        if (pageNum > 1) {
            let lastPage = pageNum - 1;
            document.getElementById("page-selections").innerHTML += `<li class="page-item" onclick = "newPage(${lastPage})"><a class="page-link" href="#">${lastPage}</a></li>`;
        }
        document.getElementById("page-selections").innerHTML += `<li class="page-item disabled"><a class="page-link" href="#">${pageNum}</a></li>`;
        if (pageNum < numOfPages) {
            let nextPage = pageNum + 1;
            document.getElementById("page-selections").innerHTML += `<li class="page-item" onclick = "newPage(${nextPage})"><a class="page-link" href="#">${nextPage}</a></li>`;
        }
        if (pageNum < numOfPages - 1) {
            document.getElementById("page-selections").innerHTML += `<li class="page-item" onclick = "newPage(${numOfPages})"><a class="page-link" href="#">${numOfPages}</a></li>`;
        }
    };
    // change to a new page
    function newPage(pageNum) {
        pageNum = parseInt(pageNum, 10);
        if (pageNum == curPage || pageNum > numOfPages) {
            return;
        }
        curPage = pageNum;
        getLandmarks('skip', 'skip', -1, pageNum);
        changePage(pageNum);
    };
    // search city using Google Maps Javascript API
    var autocomplete;
    function initAutocomplete() {
        // Create the autocomplete object, restricting the search predictions to
        // geographical location types.
        autocomplete = new google.maps.places.Autocomplete(
            document.getElementById('autocomplete'), { types: ['geocode'] });
        autocomplete.setFields(['address_component']);
        // When the user selects an address from the drop-down, populate the
        // address fields in the form.
        autocomplete.addListener('place_changed', searchAddress);
    }
    function searchAddress() {
        // Get the place details from the autocomplete object.
        var place = autocomplete.getPlace();
        console.info(document.getElementById("autocomplete").value);
    }
</script>
<!-- Google maps Javascript API -->
<script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBz_wsqkbSduXxT5Z_h60wPavplGTxIFOA&libraries=places&callback=initAutocomplete">
    </script>